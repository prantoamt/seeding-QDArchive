.TH PIPELINE 1 "February 2026" "seeding-qdarchive 0.1.0" "User Commands"
.SH NAME
pipeline \- Seeding QDArchive data acquisition and classification pipeline
.SH SYNOPSIS
.B pdm run pipeline
.RI [ command ]
.RI [ options ]
.SH DESCRIPTION
.B pipeline
is a CLI tool for acquiring and classifying open qualitative research data
to seed the QDArchive web service. It searches repositories, downloads files,
stores metadata in a local SQLite database, and exports results to CSV.
.PP
Targeted data includes QDA project files (qdpx, REFI, MAXQDA, NVivo,
ATLAS.ti, Dedoose, QDAcity, QDA Miner) and general qualitative research
data (interview transcripts, research articles).
.SH COMMANDS
.TP
.B search \fIsource\fR [\-q \fIquery\fR] [\-t \fItype\fR]
Search a data source for qualitative data records.
.RS
.TP
.I source
Name of the data source connector (see \fBlist\-sources\fR).
.TP
.BI \-q " query" ", \-\-query " query
Free-text search query string (default: "qualitative").
.TP
.BI \-t " type" ", \-\-file\-type " type
Filter results by file extension (e.g. qdpx, pdf, txt).
.RE
.TP
.B scrape \fIsource\fR [\-q \fIquery\fR] [\-f \fIfile\fR] [\-n \fIlimit\fR]
Search, fetch metadata, check licenses, and download files from a source.
Restricted files (403) are saved as metadata-only records.
Duplicates are detected by SHA-256 hash.
.RS
.TP
.I source
Name of the data source connector.
.TP
.BI \-q " query" ", \-\-query " query
Single search query string (default: "qualitative").
.TP
.BI \-f " file" ", \-\-queries\-file " file
Text file with one search query per line.
Lines starting with # are ignored.
Mutually exclusive with \fB\-q\fR.
.TP
.BI \-n " limit" ", \-\-limit " limit
Maximum number of datasets to process per query.
Omit to process all available datasets.
.RE
.TP
.B db [\-s \fIsource\fR] [\-\-qda\-only] [\-\-restricted\-only] [\-n \fIlimit\fR]
Browse the metadata database in a summary table.
.RS
.TP
.BI \-s " source" ", \-\-source " source
Filter by source name.
.TP
.B \-\-qda\-only
Show only QDA files.
.TP
.B \-\-restricted\-only
Show only restricted (not downloaded) files.
.TP
.BI \-n " limit" ", \-\-limit " limit
Maximum rows to display (default: 50).
.RE
.TP
.B show \fIid\fR [\fIid\fR ...]
Display all metadata fields for one or more records by ID.
Shows a formatted panel with file info, metadata, license details,
paths, hashes, and timestamps.
.TP
.B status
Display pipeline statistics: total records, QDA file count,
downloaded file count, and per-source breakdown.
.TP
.B list\-sources
List all available data source connectors and their current status
(ready or planned).
.TP
.B export [\-\-format \fIfmt\fR] [\-o \fIfile\fR]
Export the metadata database to a file.
.RS
.TP
.BI \-\-format " fmt"
Output format. Currently only \fBcsv\fR is supported (default: csv).
.TP
.BI \-o " file" ", \-\-output " file
Path to the output file. Defaults to \fIexports/metadata.csv\fR.
.RE
.SH DATA SOURCES
.TS
l l l.
Name	Description	Type
_
qdr	QDR (Syracuse Qualitative Data Repository)	Dataverse API
dans	DANS Data Station	Dataverse API (planned)
dataverseno	DataverseNO	Dataverse API (planned)
zenodo	Zenodo open research repository	REST API (planned)
dryad	Dryad digital data repository	REST API (planned)
ukds	UK Data Service	Scraper (planned)
qualidata	QualidataNet	Scraper (planned)
qualiservice	Qualiservice	Scraper (planned)
.TE
.SH FILES
.TP
.I pipeline.db
SQLite database storing file metadata (auto-created on first run).
.TP
.I data/{source}/{record_id}/{filename}
Downloaded files, organized by source and record.
.TP
.I exports/metadata.csv
Default CSV export location.
.TP
.I queries.txt
Default queries file with QDA-specific and qualitative data search terms.
.TP
.I pipeline.log
Log file with debug-level output from all pipeline operations.
.SH ENVIRONMENT
The pipeline requires Python 3.10+ and is managed with PDM.
Dependencies are installed via \fBpdm install\fR. All commands are
invoked through \fBpdm run pipeline\fR.
.SH EXAMPLES
Search QDR for qualitative interview data:
.PP
.RS
.nf
pdm run pipeline search qdr \-q "interview transcript"
.fi
.RE
.PP
Scrape QDR with a queries file, max 10 datasets per query:
.PP
.RS
.nf
pdm run pipeline scrape qdr \-f queries.txt \-n 10
.fi
.RE
.PP
Browse only QDA files in the database:
.PP
.RS
.nf
pdm run pipeline db \-\-qda\-only
.fi
.RE
.PP
Inspect full details for records 6, 49, and 50:
.PP
.RS
.nf
pdm run pipeline show 6 49 50
.fi
.RE
.PP
Export all metadata to a custom path:
.PP
.RS
.nf
pdm run pipeline export \-o results/my_export.csv
.fi
.RE
.PP
Check how many files have been collected:
.PP
.RS
.nf
pdm run pipeline status
.fi
.RE
.SH AUTHORS
Md Badiuzzaman Pranto <prantoamt@gmail.com>
.SH SEE ALSO
.I manual.md
for the full CLI reference with detailed examples and output explanations.
